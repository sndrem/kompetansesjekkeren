{"ast":null,"code":"import _slicedToArray from \"/Users/sindremoldeklev/Documents/kompetansesjekkeren/frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nvar _jsxFileName = \"/Users/sindremoldeklev/Documents/kompetansesjekkeren/frontend/src/pages/sokpage.tsx\";\nimport React, { useState, useReducer } from 'react';\nimport { reducer } from \"../types/reducer\";\nimport { initialState } from '../types/domain';\nimport OppsummeringEnhetsregister from '../components/oppsummering-enhetsregister';\nimport { Form, Button, Grid, Divider, Header } from 'semantic-ui-react';\nimport { ENHETSREGISTERET_HOST_AND_PORT, ARBEIDSTILSYNET_HOST_AND_PORT, SENTRAL_GODKJENNING_HOST_AND_PORT } from '../konstanter';\nimport StatusKort from \"../components/statuskort\";\nexport const StateContext = React.createContext(initialState);\nexport const DispatchContext = React.createContext({});\n\nfunction Sokpage() {\n  const _useState = useState(\"\"),\n        _useState2 = _slicedToArray(_useState, 2),\n        orgnr = _useState2[0],\n        setOrgnr = _useState2[1];\n\n  const _useReducer = useReducer(reducer, initialState),\n        _useReducer2 = _slicedToArray(_useReducer, 2),\n        state = _useReducer2[0],\n        dispatch = _useReducer2[1];\n\n  function sokIEnhetsregisteret() {\n    if (orgnr.length === 9) {\n      dispatch({\n        type: \"DATA/HENTER_DATA\"\n      });\n      fetch(\"\".concat(ENHETSREGISTERET_HOST_AND_PORT, \"?organisasjonsnummer=\").concat(orgnr)).then(data => data.json()).then(data => {\n        const parsed = JSON.parse(data);\n        console.log(\"Enhet\", parsed);\n        dispatch({\n          type: \"ENHETSREGISTER/HENTET_FRA_ENHETSREGISTER_OK\",\n          data: parsed[\"_embedded\"].enheter.length > 0 ? parsed[\"_embedded\"].enheter[0] : null\n        });\n      }).catch(err => {\n        dispatch({\n          type: \"DATA/HENTING_AV_DATA_ERROR\",\n          error: \"Klarte ikke hente data fra enhetsregisteret\"\n        });\n        console.warn(\"Klarte ikke hente data fra enhetsregisteret\", err);\n      });\n    }\n  }\n\n  function sokHosArbeidstilsynet() {\n    if (orgnr.length === 9) {\n      dispatch({\n        type: \"DATA/HENTER_DATA\"\n      });\n      fetch(\"\".concat(ARBEIDSTILSYNET_HOST_AND_PORT, \"?organisasjonsnummer=\").concat(orgnr)).then(data => {\n        return data.json();\n      }).then(data => {\n        const parsed = JSON.parse(data);\n        dispatch({\n          type: \"ARBEIDSTILSYNET/HENTET_FRA_ARBEIDSTILSYNET_OK\",\n          data: parsed.length > 0 ? parsed[0].Organisation : null\n        });\n      }).catch(err => {\n        dispatch({\n          type: \"DATA/HENTING_AV_DATA_ERROR\",\n          error: \"Klarte ikke hente data fra Arbeidstilsynet\"\n        });\n        console.warn(\"Klarte ikke hente data fra Arbeidstilsynet\", err);\n      });\n    }\n  }\n\n  function sokHosSentralGodkjenning() {\n    if (orgnr.length === 9) {\n      dispatch({\n        type: \"DATA/HENTER_DATA\"\n      });\n      fetch(\"\".concat(SENTRAL_GODKJENNING_HOST_AND_PORT, \"?organisasjonsnummer=\").concat(orgnr)).then(data => {\n        return data.json();\n      }).then(data => {\n        const parsed = JSON.parse(data);\n        console.log(\"Parsed\", parsed);\n        dispatch({\n          type: \"SENTRAL_GODKJENNING/HENTET_FRA_SENTRAL_GODKJENNING_OK\",\n          data: parsed[\"dibk-sgdata\"]\n        });\n      }).catch(err => {\n        dispatch({\n          type: \"DATA/HENTING_AV_DATA_ERROR\",\n          error: \"Klarte ikke hente data fra Sentral godkjenning\"\n        });\n        console.warn(\"Klarte ikke hente data fra Sentral godkjenning\", err);\n      });\n    }\n  }\n\n  function hentData() {\n    sokIEnhetsregisteret();\n    sokHosArbeidstilsynet();\n    sokHosSentralGodkjenning();\n  }\n\n  return React.createElement(DispatchContext.Provider, {\n    value: dispatch,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 78\n    },\n    __self: this\n  }, React.createElement(StateContext.Provider, {\n    value: state,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 79\n    },\n    __self: this\n  }, React.createElement(Form, {\n    action: \"#\",\n    onSubmit: e => e.preventDefault(),\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 80\n    },\n    __self: this\n  }, React.createElement(Form.Field, {\n    width: 4,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 81\n    },\n    __self: this\n  }, React.createElement(\"label\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 82\n    },\n    __self: this\n  }, \"S\\xF8k p\\xE5 organisasjonsnummer\"), React.createElement(\"input\", {\n    value: orgnr,\n    onChange: e => setOrgnr(e.currentTarget.value),\n    type: \"number\",\n    id: \"orgnr\",\n    \"aria-describedby\": \"orgnr-sok\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 83\n    },\n    __self: this\n  })), React.createElement(Button, {\n    onClick: hentData,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 86\n    },\n    __self: this\n  }, \"S\\xF8k\")), React.createElement(Divider, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 88\n    },\n    __self: this\n  }), state.enhetsregisterResult && React.createElement(Header, {\n    as: \"h3\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 90\n    },\n    __self: this\n  }, \"Du har s\\xF8kt p\\xE5 \", state.enhetsregisterResult.navn, \" med orgnr: \", state.enhetsregisterResult.organisasjonsnummer), React.createElement(Grid, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 91\n    },\n    __self: this\n  }, React.createElement(Grid.Column, {\n    width: 9,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 92\n    },\n    __self: this\n  }, React.createElement(StatusKort, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 93\n    },\n    __self: this\n  })), React.createElement(Grid.Column, {\n    width: 5,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 95\n    },\n    __self: this\n  }, React.createElement(OppsummeringEnhetsregister, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 96\n    },\n    __self: this\n  })))));\n}\n\nexport default Sokpage;","map":{"version":3,"sources":["/Users/sindremoldeklev/Documents/kompetansesjekkeren/frontend/src/pages/sokpage.tsx"],"names":["React","useState","useReducer","reducer","initialState","OppsummeringEnhetsregister","Form","Button","Grid","Divider","Header","ENHETSREGISTERET_HOST_AND_PORT","ARBEIDSTILSYNET_HOST_AND_PORT","SENTRAL_GODKJENNING_HOST_AND_PORT","StatusKort","StateContext","createContext","DispatchContext","Sokpage","orgnr","setOrgnr","state","dispatch","sokIEnhetsregisteret","length","type","fetch","then","data","json","parsed","JSON","parse","console","log","enheter","catch","err","error","warn","sokHosArbeidstilsynet","Organisation","sokHosSentralGodkjenning","hentData","e","preventDefault","currentTarget","value","enhetsregisterResult","navn","organisasjonsnummer"],"mappings":"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","sourcesContent":["import React, { useState, useReducer } from 'react';\nimport { reducer } from \"../types/reducer\";\nimport { initialState, Appstate } from '../types/domain';\nimport OppsummeringEnhetsregister from '../components/oppsummering-enhetsregister';\nimport { Form, Button, Loader, Segment, Grid, Divider, Header } from 'semantic-ui-react';\nimport { ENHETSREGISTERET_HOST_AND_PORT, ARBEIDSTILSYNET_HOST_AND_PORT, SENTRAL_GODKJENNING_HOST_AND_PORT } from '../konstanter';\nimport StatusKort from \"../components/statuskort\";\n\nexport const StateContext = React.createContext<Appstate>(initialState);\nexport const DispatchContext = React.createContext({});\n\nfunction Sokpage() {\n    const [orgnr, setOrgnr] = useState<string>(\"\");\n    const [state, dispatch] = useReducer(reducer, initialState);\n\n    function sokIEnhetsregisteret() {\n        if (orgnr.length === 9) {\n            dispatch({ type: \"DATA/HENTER_DATA\" });\n            fetch(`${ENHETSREGISTERET_HOST_AND_PORT}?organisasjonsnummer=${orgnr}`)\n                .then(data => data.json())\n                .then(data => {\n                    const parsed = JSON.parse(data);\n                    console.log(\"Enhet\", parsed);\n                    dispatch({ type: \"ENHETSREGISTER/HENTET_FRA_ENHETSREGISTER_OK\", data: parsed[\"_embedded\"].enheter.length > 0 ? parsed[\"_embedded\"].enheter[0] : null })\n                })\n                .catch(err => {\n                    dispatch({ type: \"DATA/HENTING_AV_DATA_ERROR\", error: \"Klarte ikke hente data fra enhetsregisteret\" })\n                    console.warn(\"Klarte ikke hente data fra enhetsregisteret\", err);\n                })\n        }\n    }\n\n    function sokHosArbeidstilsynet() {\n        if (orgnr.length === 9) {\n            dispatch({ type: \"DATA/HENTER_DATA\" });\n            fetch(`${ARBEIDSTILSYNET_HOST_AND_PORT}?organisasjonsnummer=${orgnr}`)\n                .then(data => {\n                    return data.json();\n                })\n                .then(data => {\n                    const parsed = JSON.parse(data);\n                    dispatch({ type: \"ARBEIDSTILSYNET/HENTET_FRA_ARBEIDSTILSYNET_OK\", data: parsed.length > 0 ? parsed[0].Organisation : null });\n                })\n                .catch(err => {\n                    dispatch({ type: \"DATA/HENTING_AV_DATA_ERROR\", error: \"Klarte ikke hente data fra Arbeidstilsynet\" });\n                    console.warn(\"Klarte ikke hente data fra Arbeidstilsynet\", err);\n                });\n        }\n    }\n\n    function sokHosSentralGodkjenning() {\n        if (orgnr.length === 9) {\n            dispatch({ type: \"DATA/HENTER_DATA\" });\n            fetch(`${SENTRAL_GODKJENNING_HOST_AND_PORT}?organisasjonsnummer=${orgnr}`)\n                .then(data => {\n                    return data.json();\n                })\n                .then(data => {\n                    const parsed = JSON.parse(data);\n                    console.log(\"Parsed\", parsed);\n                    dispatch({ type: \"SENTRAL_GODKJENNING/HENTET_FRA_SENTRAL_GODKJENNING_OK\", data: parsed[\"dibk-sgdata\"] });\n                })\n                .catch(err => {\n                    dispatch({ type: \"DATA/HENTING_AV_DATA_ERROR\", error: \"Klarte ikke hente data fra Sentral godkjenning\" });\n                    console.warn(\"Klarte ikke hente data fra Sentral godkjenning\", err);\n                });\n        }\n    }\n\n    function hentData() {\n        sokIEnhetsregisteret();\n        sokHosArbeidstilsynet();\n        sokHosSentralGodkjenning();\n    }\n\n\n    return (\n        <DispatchContext.Provider value={dispatch}>\n            <StateContext.Provider value={state}>\n                <Form action=\"#\" onSubmit={(e) => e.preventDefault()}>\n                    <Form.Field width={4}>\n                        <label>Søk på organisasjonsnummer</label>\n                        <input value={orgnr} onChange={(e) => setOrgnr(e.currentTarget.value)} type=\"number\" id=\"orgnr\" aria-describedby=\"orgnr-sok\" />\n\n                    </Form.Field>\n                    <Button onClick={hentData}>Søk</Button>\n                </Form>\n                <Divider />\n\n                {state.enhetsregisterResult && <Header as=\"h3\">Du har søkt på {state.enhetsregisterResult.navn} med orgnr: {state.enhetsregisterResult.organisasjonsnummer}</Header>}\n                <Grid>\n                    <Grid.Column width={9}>\n                        <StatusKort />\n                    </Grid.Column>\n                    <Grid.Column width={5}>\n                        <OppsummeringEnhetsregister />\n                    </Grid.Column>\n                </Grid>\n            </StateContext.Provider>\n        </DispatchContext.Provider>\n    );\n}\n\nexport default Sokpage;"]},"metadata":{},"sourceType":"module"}