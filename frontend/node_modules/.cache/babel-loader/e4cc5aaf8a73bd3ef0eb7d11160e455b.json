{"ast":null,"code":"import _slicedToArray from \"/Users/sindremoldeklev/Documents/kompetansesjekkeren/frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nvar _jsxFileName = \"/Users/sindremoldeklev/Documents/kompetansesjekkeren/frontend/src/pages/sokpage.tsx\";\nimport React, { useReducer, useState } from \"react\";\nimport { Button, Divider, Form, Grid, Header, Message, Loader } from \"semantic-ui-react\";\nimport OppsummeringEnhetsregister from \"../components/oppsummering-enhetsregister\";\nimport EnhetsregisterStatuskort from \"../components/enhetsregister-statuskort\";\nimport { ARBEIDSTILSYNET_HOST_AND_PORT, ENHETSREGISTERET_HOST_AND_PORT, SENTRAL_GODKJENNING_HOST_AND_PORT } from \"../konstanter\";\nimport { initialState } from \"../types/domain\";\nimport { reducer } from \"../types/reducer\";\nimport ArbeidstilsynetStatuskort from \"../components/arbeidstilsynet-statuskort\";\nimport SentralGodkjenningStatuskort from \"../components/sentralGodkjenning-statuskort\";\nimport \"./sokpage.scss\";\nexport const StateContext = React.createContext(initialState);\nexport const DispatchContext = React.createContext({});\n\nfunction Sokpage() {\n  const _useState = useState(\"\"),\n        _useState2 = _slicedToArray(_useState, 2),\n        orgnr = _useState2[0],\n        setOrgnr = _useState2[1];\n\n  const _useReducer = useReducer(reducer, initialState),\n        _useReducer2 = _slicedToArray(_useReducer, 2),\n        state = _useReducer2[0],\n        dispatch = _useReducer2[1];\n\n  function sokIEnhetsregisteret() {\n    if (orgnr.length === 9) {\n      dispatch({\n        type: \"DATA/HENTER_DATA\"\n      });\n      fetch(\"\".concat(ENHETSREGISTERET_HOST_AND_PORT, \"?organisasjonsnummer=\").concat(orgnr)).then(data => data.json()).then(data => {\n        const parsed = JSON.parse(data);\n        dispatch({\n          type: \"ENHETSREGISTER/HENTET_FRA_ENHETSREGISTER_OK\",\n          data: parsed._embedded.enheter.length > 0 ? parsed._embedded.enheter[0] : null\n        });\n      }).catch(err => {\n        dispatch({\n          type: \"DATA/HENTING_AV_DATA_ERROR\",\n          error: \"Klarte ikke hente data fra Enhetsregisteret. Prøv igjen om en liten stund.\"\n        });\n      });\n    }\n  }\n\n  function sokHosArbeidstilsynet() {\n    if (orgnr.length === 9) {\n      dispatch({\n        type: \"DATA/HENTER_DATA\"\n      });\n      fetch(\"\".concat(ARBEIDSTILSYNET_HOST_AND_PORT, \"?organisasjonsnummer=\").concat(orgnr)).then(data => {\n        return data.json();\n      }).then(data => {\n        const parsed = JSON.parse(data);\n        dispatch({\n          type: \"ARBEIDSTILSYNET/HENTET_FRA_ARBEIDSTILSYNET_OK\",\n          data: parsed.length > 0 ? parsed[0] : null\n        });\n      }).catch(err => {\n        dispatch({\n          type: \"DATA/HENTING_AV_DATA_ERROR\",\n          error: \"Klarte ikke hente data fra Arbeidstilsynet .Prøv igjen om en liten stund.\"\n        });\n      });\n    }\n  }\n\n  function sokHosSentralGodkjenning() {\n    if (orgnr.length === 9) {\n      dispatch({\n        type: \"DATA/HENTER_DATA\"\n      });\n      fetch(\"\".concat(SENTRAL_GODKJENNING_HOST_AND_PORT, \"?organisasjonsnummer=\").concat(orgnr)).then(data => {\n        return data.json();\n      }).then(data => {\n        if (data) {\n          const parsed = JSON.parse(data);\n          dispatch({\n            type: \"SENTRAL_GODKJENNING/HENTET_FRA_SENTRAL_GODKJENNING_OK\",\n            data: parsed[\"dibk-sgdata\"]\n          });\n        }\n      }).catch(err => {\n        dispatch({\n          type: \"DATA/HENTING_AV_DATA_ERROR\",\n          error: \"Klarte ikke hente data fra Sentral godkjenning. Prøv igjen om en liten stund.\"\n        });\n      });\n    }\n  }\n\n  function hentData() {\n    sokIEnhetsregisteret();\n    sokHosArbeidstilsynet();\n    sokHosSentralGodkjenning();\n  }\n\n  return React.createElement(DispatchContext.Provider, {\n    value: dispatch,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 77\n    },\n    __self: this\n  }, React.createElement(StateContext.Provider, {\n    value: state,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 78\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    className: \"sokeside\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 79\n    },\n    __self: this\n  }, React.createElement(Form, {\n    className: \"sokeform\",\n    action: \"#\",\n    onSubmit: e => e.preventDefault(),\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 80\n    },\n    __self: this\n  }, React.createElement(Header, {\n    as: \"h1\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 81\n    },\n    __self: this\n  }, \"Kompetansesjekk\"), React.createElement(\"p\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 82\n    },\n    __self: this\n  }, \"Sjekk organisasjon opp mot \", React.createElement(\"a\", {\n    target: \"_blank\",\n    rel: \"noopener noreferrer\",\n    href: \"https://www.brreg.no/\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 82\n    },\n    __self: this\n  }, \"Br\\xF8nn\\xF8ysundregisteret (Enhetsregisteret)\"), \", \", React.createElement(\"a\", {\n    target: \"_blank\",\n    rel: \"noopener noreferrer\",\n    href: \"https://sgregister.dibk.no/\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 82\n    },\n    __self: this\n  }, \"Sentral godkjenning\"), \" og Arbeidstilsynet sitt \", React.createElement(\"a\", {\n    target: \"_blank\",\n    rel: \"noopener noreferrer\",\n    href: \"https://www.arbeidstilsynet.no/registre/renholdsregisteret/sok/\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 82\n    },\n    __self: this\n  }, \"renholdsregister\"), \".\"), React.createElement(Form.Field, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 83\n    },\n    __self: this\n  }, React.createElement(\"label\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 84\n    },\n    __self: this\n  }, \"S\\xF8k p\\xE5 organisasjonsnummer\"), React.createElement(\"input\", {\n    placeholder: \"Organisasjonsnummer - 9 siffer\",\n    value: orgnr,\n    onChange: e => setOrgnr(e.currentTarget.value),\n    type: \"text\",\n    id: \"orgnr\",\n    maxLength: 9,\n    required: true,\n    \"aria-describedby\": \"orgnr-sok\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 85\n    },\n    __self: this\n  })), React.createElement(Button, {\n    primary: true,\n    className: \"cta-btn\",\n    onClick: hentData,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 87\n    },\n    __self: this\n  }, \"S\\xF8k\"))), React.createElement(Divider, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 90\n    },\n    __self: this\n  }), state.loading && React.createElement(Loader, {\n    active: state.loading,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 91\n    },\n    __self: this\n  }), state.error && React.createElement(Message, {\n    color: \"red\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 92\n    },\n    __self: this\n  }, React.createElement(Message.Header, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 92\n    },\n    __self: this\n  }, \"Oisann \", React.createElement(\"span\", {\n    role: \"img\",\n    \"aria-label\": \"Oisann-ikon\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 92\n    },\n    __self: this\n  }, \"\\uD83D\\uDE48\")), state.error), state.enhetsregisterResult && React.createElement(Header, {\n    as: \"h3\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 93\n    },\n    __self: this\n  }, \"Du har s\\xF8kt p\\xE5 \", state.enhetsregisterResult.navn, \" med orgnr: \", state.enhetsregisterResult.organisasjonsnummer), React.createElement(Grid, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 94\n    },\n    __self: this\n  }, React.createElement(Grid.Column, {\n    width: 10,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 95\n    },\n    __self: this\n  }, state.submitted && React.createElement(EnhetsregisterStatuskort, {\n    orgnr: orgnr,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 96\n    },\n    __self: this\n  }), state.submitted && React.createElement(ArbeidstilsynetStatuskort, {\n    orgnr: orgnr,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 97\n    },\n    __self: this\n  }), state.submitted && React.createElement(SentralGodkjenningStatuskort, {\n    orgnr: orgnr,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 98\n    },\n    __self: this\n  })), React.createElement(Grid.Column, {\n    width: 5,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 100\n    },\n    __self: this\n  }, React.createElement(OppsummeringEnhetsregister, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 101\n    },\n    __self: this\n  })))));\n}\n\nexport default Sokpage;","map":{"version":3,"sources":["/Users/sindremoldeklev/Documents/kompetansesjekkeren/frontend/src/pages/sokpage.tsx"],"names":["React","useReducer","useState","Button","Divider","Form","Grid","Header","Message","Loader","OppsummeringEnhetsregister","EnhetsregisterStatuskort","ARBEIDSTILSYNET_HOST_AND_PORT","ENHETSREGISTERET_HOST_AND_PORT","SENTRAL_GODKJENNING_HOST_AND_PORT","initialState","reducer","ArbeidstilsynetStatuskort","SentralGodkjenningStatuskort","StateContext","createContext","DispatchContext","Sokpage","orgnr","setOrgnr","state","dispatch","sokIEnhetsregisteret","length","type","fetch","then","data","json","parsed","JSON","parse","_embedded","enheter","catch","err","error","sokHosArbeidstilsynet","sokHosSentralGodkjenning","hentData","e","preventDefault","currentTarget","value","loading","enhetsregisterResult","navn","organisasjonsnummer","submitted"],"mappings":"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","sourcesContent":["import React, { useReducer, useState } from \"react\";\nimport { Button, Divider, Form, Grid, Header, Message, Loader } from \"semantic-ui-react\";\nimport OppsummeringEnhetsregister from \"../components/oppsummering-enhetsregister\";\nimport EnhetsregisterStatuskort from \"../components/enhetsregister-statuskort\";\nimport { ARBEIDSTILSYNET_HOST_AND_PORT, ENHETSREGISTERET_HOST_AND_PORT, SENTRAL_GODKJENNING_HOST_AND_PORT } from \"../konstanter\";\nimport { Appstate, initialState } from \"../types/domain\";\nimport { reducer } from \"../types/reducer\";\nimport ArbeidstilsynetStatuskort from \"../components/arbeidstilsynet-statuskort\";\nimport SentralGodkjenningStatuskort from \"../components/sentralGodkjenning-statuskort\";\nimport \"./sokpage.scss\";\n\nexport const StateContext = React.createContext<Appstate>(initialState);\nexport const DispatchContext = React.createContext({});\n\nfunction Sokpage() {\n    const [orgnr, setOrgnr] = useState<string>(\"\");\n    const [state, dispatch] = useReducer(reducer, initialState);\n\n    function sokIEnhetsregisteret() {\n        if (orgnr.length === 9) {\n            dispatch({ type: \"DATA/HENTER_DATA\" });\n            fetch(`${ENHETSREGISTERET_HOST_AND_PORT}?organisasjonsnummer=${orgnr}`)\n                .then((data) => data.json())\n                .then((data) => {\n                    const parsed = JSON.parse(data);\n                    dispatch({ type: \"ENHETSREGISTER/HENTET_FRA_ENHETSREGISTER_OK\", data: parsed._embedded.enheter.length > 0 ? parsed._embedded.enheter[0] : null });\n                })\n                .catch((err) => {\n                    dispatch({ type: \"DATA/HENTING_AV_DATA_ERROR\", error: \"Klarte ikke hente data fra Enhetsregisteret. Prøv igjen om en liten stund.\" });\n                });\n        }\n    }\n\n    function sokHosArbeidstilsynet() {\n        if (orgnr.length === 9) {\n            dispatch({ type: \"DATA/HENTER_DATA\" });\n            fetch(`${ARBEIDSTILSYNET_HOST_AND_PORT}?organisasjonsnummer=${orgnr}`)\n                .then((data) => {\n                    return data.json();\n                })\n                .then((data) => {\n                    const parsed = JSON.parse(data);\n                    dispatch({ type: \"ARBEIDSTILSYNET/HENTET_FRA_ARBEIDSTILSYNET_OK\", data: parsed.length > 0 ? parsed[0] : null });\n                })\n                .catch((err) => {\n                    dispatch({ type: \"DATA/HENTING_AV_DATA_ERROR\", error: \"Klarte ikke hente data fra Arbeidstilsynet .Prøv igjen om en liten stund.\" });\n                });\n        }\n    }\n\n    function sokHosSentralGodkjenning() {\n        if (orgnr.length === 9) {\n            dispatch({ type: \"DATA/HENTER_DATA\" });\n            fetch(`${SENTRAL_GODKJENNING_HOST_AND_PORT}?organisasjonsnummer=${orgnr}`)\n                .then((data) => {\n                    return data.json();\n                })\n                .then((data) => {\n                    if (data) {\n                        const parsed = JSON.parse(data);\n                        dispatch({ type: \"SENTRAL_GODKJENNING/HENTET_FRA_SENTRAL_GODKJENNING_OK\", data: parsed[\"dibk-sgdata\"] });\n                    }\n                })\n                .catch((err) => {\n                    dispatch({ type: \"DATA/HENTING_AV_DATA_ERROR\", error: \"Klarte ikke hente data fra Sentral godkjenning. Prøv igjen om en liten stund.\" });\n                });\n        }\n    }\n\n    function hentData() {\n        sokIEnhetsregisteret();\n        sokHosArbeidstilsynet();\n        sokHosSentralGodkjenning();\n    }\n\n    return (\n        <DispatchContext.Provider value={dispatch}>\n            <StateContext.Provider value={state}>\n                <div className=\"sokeside\">\n                    <Form className=\"sokeform\" action=\"#\" onSubmit={(e) => e.preventDefault()}>\n                        <Header as=\"h1\">Kompetansesjekk</Header>\n                        <p>Sjekk organisasjon opp mot <a target=\"_blank\" rel=\"noopener noreferrer\" href=\"https://www.brreg.no/\">Brønnøysundregisteret (Enhetsregisteret)</a>, <a target=\"_blank\" rel=\"noopener noreferrer\" href=\"https://sgregister.dibk.no/\">Sentral godkjenning</a> og Arbeidstilsynet sitt <a target=\"_blank\" rel=\"noopener noreferrer\" href=\"https://www.arbeidstilsynet.no/registre/renholdsregisteret/sok/\">renholdsregister</a>.</p>\n                        <Form.Field>\n                            <label>Søk på organisasjonsnummer</label>\n                            <input placeholder=\"Organisasjonsnummer - 9 siffer\" value={orgnr} onChange={(e) => setOrgnr(e.currentTarget.value)} type=\"text\" id=\"orgnr\" maxLength={9} required aria-describedby=\"orgnr-sok\" />\n                        </Form.Field>\n                        <Button primary className=\"cta-btn\" onClick={hentData}>Søk</Button>\n                    </Form>\n                </div>\n                <Divider />\n                {state.loading && <Loader active={state.loading} />}\n                {state.error && <Message color=\"red\"><Message.Header>Oisann <span role=\"img\" aria-label=\"Oisann-ikon\">🙈</span></Message.Header>{state.error}</Message>}\n                {state.enhetsregisterResult && <Header as=\"h3\">Du har søkt på {state.enhetsregisterResult.navn} med orgnr: {state.enhetsregisterResult.organisasjonsnummer}</Header>}\n                <Grid>\n                    <Grid.Column width={10}>\n                        {state.submitted && <EnhetsregisterStatuskort orgnr={orgnr} />}\n                        {state.submitted && <ArbeidstilsynetStatuskort orgnr={orgnr} />}\n                        {state.submitted && <SentralGodkjenningStatuskort orgnr={orgnr} />}\n                    </Grid.Column>\n                    <Grid.Column width={5}>\n                        <OppsummeringEnhetsregister />\n                    </Grid.Column>\n                </Grid>\n            </StateContext.Provider>\n        </DispatchContext.Provider>\n    );\n}\n\nexport default Sokpage;\n"]},"metadata":{},"sourceType":"module"}